<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Address Verification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Set the API endpoint for quick verification
        const API_ENDPOINT = "https://address-verification-app.vercel.app/api/verify-single-address";

        // Re-use your color palette for consistency
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#1D4ED8', // Dark Blue
                        'secondary-green': '#059669', // Dark Green
                        'neutral-gray': '#E5E7EB',
                        'accent-yellow': '#FCD34D', // A nice accent for the bulk button
                    },
                    fontFamily: {
                        // Ensure consistent font
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
        
        /**
         * Function to prompt the user for the Bulk Access Code and verify it 
         * via an API call before navigating.
         */
        async function promptForBulkAccess(event) {
            event.preventDefault(); 
            
            const accessCode = prompt("üîê Enter Access Code for Bulk Verification:");
            
            if (!accessCode || accessCode.trim() === '') {
                alert("Bulk verification cancelled. Access code is required.");
                return;
            }

            try {
                // 1. Send the code to the Vercel API for verification
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        accessCode: accessCode.trim(),
                        quickCheck: true // Signal the backend to ONLY check the code
                    })
                });

                // 2. Check the response status
                if (response.status === 200) {
                    // Success! Code is correct.
                    // Save the code to session storage for the bulk page
                    sessionStorage.setItem('bulkAccessCode', accessCode.trim());
                    // Redirect the user
                    window.location.href = "bulk.html";
                } else if (response.status === 401) {
                    // Unauthorized - Code is wrong
                    alert("‚ùå Invalid Access Code. Please try again.");
                } else {
                    // Other server errors
                    alert("Server error during access code verification. Try again later.");
                }

            } catch (e) {
                console.error("Network Error during code verification:", e);
                alert("A network error occurred. Could not verify access code.");
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-neutral-gray min-h-screen flex items-center justify-center p-4">
    
    <div class="w-full max-w-lg bg-white p-8 sm:p-10 rounded-xl shadow-2xl border border-gray-100">

        <header class="header text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-900 mb-2">
                <span class="text-primary-blue">AI Address</span> Verification
            </h1>
            <p class="text-lg text-gray-500 mt-2">Choose a method to clean, normalize, and verify addresses using advanced AI.</p>
        </header>
        
        <div class="options-container space-y-6 mt-8">
            
            <a href="single.html" class="block w-full text-center py-4 px-6 bg-secondary-green text-white font-bold text-xl rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-secondary-green focus:ring-opacity-50">
                <span class="mr-2">üìù</span> Verify Single Address
            </a>
            
            <a href="#" onclick="promptForBulkAccess(event)" class="block w-full text-center py-4 px-6 bg-accent-yellow text-gray-900 font-bold text-xl rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-accent-yellow focus:ring-opacity-50">
                <span class="mr-2">üì¶</span> Bulk Address Verification
            </a>
        </div>
        
        <p class="text-center mt-8 text-sm text-gray-500 border-t pt-4">
            The bulk verification process is handled directly in your browser to maintain **data privacy** and speed.
        </p>
    </div>
</body>
</html>
